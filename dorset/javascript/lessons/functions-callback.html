<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Callback functions | JavaScript Tutorials | Brendan Munnelly</title>
	<meta name="description" content="Working with callback functions and higher-order functions in JavaScript.">

    <meta name="author" content="Brendan Munnelly">

    <!-- Stylesheet-->
    <link rel="stylesheet" href="../../assets/css/dorset-js.css" />

	<style>
		pre { background-color: #282c34;}
	</style>


    <!-- Syntax Highlighter -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark-reasonable.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>

	<script defer src="../../assets/js/cookie.js"></script>

    <!-- Font Awesome 6 icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
	
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RQ1JXS4GKM"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-RQ1JXS4GKM');
    </script>
    </head>

    <body id="top">

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KGBDMFL"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->




		<header>
			<div class="wrapper">
				<div class="sidebar">
					<div><p>&nbsp;</p>
					</div>
				</div>
		
				<div class="content">
					<h1>Callback functions</h1>
					<h2>Working with callback functions and higher-order functions in JavaScript.</h2>
				</div>
			</div><!-- /wrapper -->
		</header>

		<main>

			<aside>
				<h3>JAVASCRIPT TUTORIALS</h3>
	
				<p><i class="fa-solid fa-house"></i> &nbsp;<a href="../index.html">Home</a></p>
	
				<h3>THIS TUTORIAL</h3>
				<p><a href="#learning-goals">Learning Goals</a></p>
				<p><a href="#about-callbacks">About callback functions</a></p>
				<p><a href="#sync">Synchronous callback functions</a></p>
				<p><a href="#data-receivers">Callback functions as data receivers</a></p>
				<p><a href="#inline">Inline callback functions</a></p>

				<p><a href="#callbacks-arrays">Callback functions the <code>.forEach()</code> loop</a></p>

                <p><a href="#async">Asynchronous callback functions</a></p>  

				<p><a href="#try-it">Try it yourself</a></p>

				<p><a href="#resources">More learning resources</a></p>
		  
				<p><a href="#ai-prompts">Sample AI prompts</a></p>
	
				<p><i class="fas fa-arrow-circle-up"></i> &nbsp;<a href="#top">Back to Top</a></p>
	
				<p>&nbsp;</p>
				<p>&nbsp;</p>
				<p>&nbsp;</p>

			</aside>
	
	<article>
	<section id="learning-goals">
		<h2>Learning Goals</h2>
		<p>At the end of this Tutorial, you will be able to:</p>

	
			<ul>
				<li>Understand the terms <i>callback function</i> and <i>higher-order function</i> in JavaScript.</li>
				<li>Pass function expressions to higher-order function as callbacks, using the anonymous and arrow function syntax for the passed functions.</li>
                <li>Write callback functions inline inside the parentheses of the higher-order function.</li>
			</ul>


	</section>

   <section>

 <div class="code-snippets" style="margin-bottom:32px">
            <p>For this Tutorial, in your <b>javascript/exercises</b> folder, create a new HTML file named <b>workfile-10.html</b>.</p>
   			<p>Create a new empty text file named <b>script-10.js</b> and save it in this same folder.</p>
            <p>Add a link to <b>script-10.js</b> in your <b>workfile-9.html</b> file using a <code>&lt;script&gt;</code> tag with the <code>defer</code> attribute.</p>


			<img src="assets/img/functions-callback/workfile-10.png" alt="screenshot">
		</div>

</section>



	<section id="about-callbacks">

        <h2>About callback functions</h2>

        <p>In the previous <a href="functions-anonymous-arrow.html" target="_blank">Anonymous and arrow functions</a> Tutorial, you learned to create <i>function expressions</i> and pass them as arguments to other functions.</p>

        <p>For example, you built a general-purpose calculator function that can accept two values - and also the type of arithmetic operation to be performed on them.</p>

        <img src="assets/img/functions-callback/function-imagine.png" alt="screenshot" style="max-width: 700px">

        <p>Copy this code to your <b>script-10.js</b> file and verify it runs correctly.</p>

<pre><button class="copy-code" id="btn-1">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-1" class="hljs language-javascript">// ======== WORKING WITH FUNCTION EXPRESSIONS ========
const addTwoNums = function (num1, num2) {
    return num1 + num2;
};

const subtractTwoNums = function (num1, num2) {
    return num1 - num2;
}

const multiplyTwoNums = function (num1, num2) {
    return num1 * num2;
}

const divideTwoNums = function (num1, num2) {
    return num1 / num2;
}

// The main, general-purpose function
function doCalculation(num1, num2, operation) {
  return operation(num1, num2);
}

/* Call the main function with different arguments
The arguments can be numbers and an operation */
let resultCalcAdd = doCalculation(10, 5, addTwoNums); 
console.log(`Calculator addition result: ${resultCalcAdd}`);// 15
let resultCalcSubtract = doCalculation(10, 5, subtractTwoNums); 
console.log(`Calculator subtraction result: ${resultCalcSubtract}`);// 5</code></pre>

<p>As an exercise, convert the four anonymous functions that do arithmetic to arrow function format.</p>

<img src="assets/img/functions-callback/four=arrow-functions.png" alt="screenshot" style="max-width: 740px">

        <p>You can think of this code as containing two types of functions:</p>

        <ul>
            <li><b>Higher-order function</b>: This is <span class="syn-js">doCalculation()</span>. It can accept another function as an argument.</li>
            <li><b>Callback function</b>: Any one of the four basic arithmetic functions passed as arguments.</li>
        </ul>

        <p>With this approach, you are no longer only passing data (numbers/strings); you are passing instructions (behaviour). The 'main' function has no built-in behaviour - it doesn't know what it's doing; it just knows how to run the functionality you give it.</p>

        <p>Higher-order functions help make your code more reusable and modular by allowing you to work with functions like any other value.</p>

        <p>At a more advanced level, higher-order functions can combine multiple functions to create a new function.</p>

        </section>

        <section id="sync">
        <h2>Synchronous callback functions</h2>
        <p>Let's consider the program flow in the above example:</p>
        <ul>

            <li><b>Push</b>: The JavaScript engine starts running the 'main' <span class="syn-js">doCalculation()</span> function and receives the callback function as an argument. It <i>pushes</i> the 'main' function onto the Call Stack.</li>

            <li><b>Handover</b>: Inside that 'main' function, the JavaScript engine hits the line  <b>operation(num1, num2)</b>. The engine pauses the 'main' function and  <i>pushes</i> the callback function on top of it in the stack.
            <span class="inside-ol">&nbsp;</span>
            This creates a <i>blocking</i> action. While a simple calculation like 10 + 5 happens too fast to notice, if this callback performed a heavy task (like processing 1 million rows of data), the entire web page would 'freeze' and become unresponsive until the callback finished.</li>

            <li><b>Execution</b>: The engine runs the code inside the callback function.</li>

            <li><b>Pop/Return</b>: When the callback hits a closing brace <span class="syn-js">}</span> or <span class="syn-js">return</span>, the engine <i>pops</i> (removes) it off the stack. </li>

            <li><b>Resume</b>: The engine looks down and sees <span class="syn-js">doCalculation()</span> is now at the top of the stack again. It resumes execution exactly where it left off. Control is now returned to the 'main' function.</li>
        </ul>
           
        <p>This program flow results from the fact that JavaScript is synchronous (single-threaded) language: <i>it can do only one thing at a time</i>. It reads code from top to bottom. If it hits a 'heavy' task (like performing an intensive calculation or fetching data from a remote server), the web page 'freezes' or 'hangs' until that task is done.</p>

        <p>In short, a <i>callback function</i> is a function that is passed into another function as an argument, which is then invoked ('called back') inside the outer function to complete some kind of routine or action.</p>
            

        <p>Below is the simplest possible example of a higher-order and a callback function working together.</p>
<pre><button class="copy-code" id="btn-2">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-2" class="hljs language-javascript"> // Very basic higher-order and callback function pattern

/* The function that will be passed as an argument to the 
'callback' parameter of the 'main' function */
const callbackFunction = () =&gt; console.log("Hello from callback function.");

/* The 'main' function with a parameter named 'callback' */
function mainFunction(callback) { 
    // Do something
    callback();  // run the callback function passed as an argument            
};

// Run the main function
mainFunction(callbackFunction)</code></pre>
</section>

<section id="data-receivers">
    <h2>Callback functions as data receivers</h2>

    <p>In our <span class="syn-js">doCalculation()</span> example, we passed both the data (<b>num1</b>, <b>num2</b>) and the instructions (<b>callback)</b> into the 'main' function. The 'main' function simply connected them together.</p>

    <p>The 'main' function doesn't pass any data to the callback function. It just runs it.</p>
    
    <p>However, in the real world:</p>
    <ul>
        <li>The 'main' function already has the data for the callback to work with, or,</li>
        <li>The 'main' function receives the data from somewhere else and passes it to the callback.</li>
    </ul>
    
    <p>In such cases, we pass only the instructions (the callback) to the 'main' function. The 'main' function then <i>injects</i> its data into the callback when it runs it. The callback function then acts as a <i>data receiver</i>.</p>

    <p>Consider the code example below.</p>

<pre><button class="copy-code" id="btn-3">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-3" class="hljs language-javascript">// === CALLBACK FUNCTIONS AS DATA RECEIVERS ===

/* The 'main function accepts a parameter named 'callback' 
But it already **has** the data (userName) for the callback to work with */
function fetchUserAndGreet(callback) {
    let userName = "Alice";
    callback(userName);
}

// Two callback functions that will receive data (name) from the 'main' function
const sayHello = userName =&gt; console.log(`Hello: ${userName}`);
const sayGoodbye = userName =&gt; console.log(`Goodbye: ${userName}`);

// Calling the 'main' function
fetchUserAndGreet(sayHello);    // Outputs: "Hello, Alice"
fetchUserAndGreet(sayGoodbye);  // Outputs: "Goodbye, Alice"</code></pre>

</section>

<section id="inline">
    <h2>Inline callback functions</h2>
    <p>In the examples above, we defined our callback functions separately and gave them names, such as <span class="syn-js">addTwoNums()</span> and <span class="syn-js">sayHello()</span>.</p>
    
    <p>However, if a callback is short and only used in one place, we often define it inline - that is, directly inside the 'main' function call.</p>

    <p>Copy the higher-order function below. It has a single parameter ready to receive a callback function.</p>

<pre><button class="copy-code" id="btn-4">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-4" class="hljs language-javascript">// === INLINE CALLBACK FUNCTIONS ===

// Higher-order function that accepts a callback as an argument
function showUserGreeting(callback) {
    // Data supplied to callback
    let userName = "Alice";
    callback(userName); 
}</code></pre>

    <p>You could continue by creating and naming a separate callback function to pass as an argument, and then running the higher-order function, as before.</p>

    <img src="assets/img/functions-callback/callbacks-old-way.png" alt="screenshot" style="max-width: 700px">

    <p>A more modern approach is to write the callback function directly inside the <span class="syn-js">()</span> parentheses of the higher-order function. Copy the code below.</p>

<pre><button class="copy-code" id="btn-5">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-5" class="hljs language-javascript">/* Call the main function with the callback function 
written inside the () in anonymous function syntax */
showUserGreeting(userName =&gt; {
    console.log(`Hello: ${userName}`);
});</code></pre>

    <p>Or, using arrow function syntax:</p>

<pre><button class="copy-code" id="btn-6">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-6" class="hljs language-javascript">/* Call the main function with the callback function 
written inside the () in shorter arrow function syntax */
showUserGreeting(userName =&gt; console.log(`Hello: ${userName}`));</code></pre>

<p>Note:</p>

    <ul>
        <li>The outer or higher-order function <span class="syn-js">showUserGreeting(callback)</span> must be defined beforehand so JavaScript knows how to handle the argument you pass it.</li>

        <li>The inner or callback function is defined on-the-fly. It didn't exist until this specific line of code ran.</li>
    </ul>

    <img src="assets/img/functions-callback/inline-functions.png" alt="screenshot">

    <p>With this approach, you are doing two things at once:</p>
    
    <ul>
        <li>Defining the callback function, and</li>
        <li>Passing it as an argument to the outer function.</li>
    </ul>

    <p>Instead of passing a variable name (like <b>sayHello</b>), you are pasting the entire function definition directly into the  <span class="syn-js">()</span> parentheses.</p>


    <p>The callback function doesn't need a name because you aren't saving it to use later; you are using it right now and then forgetting about it.</p>

    <p>This approach keeps the logic right where it is used. You don't have to scroll up to find a separate function definition.</p>

</section>


<section id="callbacks-arrays">
    <h2>Callbacks and the <code>.forEach()</code> loop</h2>

    <p>Many array methods, like the <code>.forEach()</code> loop introduced in <a href="arrays-objects.html" target="_blank">Arrays of objects</a> Tutorial, use callback functions to perform actions on each element in the array.</p>

    <p>Copy the sample array to your <b>script-10.js</b> file.</p>

<pre><button class="copy-code" id="btn-7">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-7" class="hljs language-javascript">// Creating an array with objects
const arrUsers = [
    { firstName: "Maria", age: 25, city: "New York" },
    { firstName: "Bob", age: 30, city: "Los Angeles" },
    { firstName: "Charlie", age: 35, city: "Chicago" }
];</code></pre>


    <p>Next, create an anonymous function expression to use as a callback and save it to a variable.</p>

<pre><button class="copy-code" id="btn-8">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-8" class="hljs language-javascript">/* Create anonymous function expression to use as callback */    
const displayUserAnon = function(user) {
    console.log(`Name: ${user.firstName}, Age: ${user.age}, City: ${user.city}`);
}</code></pre>

    <p>Now, pass this function as a callback to the <span class="syn-js">.forEach()</span> loop to display the details of each user in the array.</p>

<pre><button class="copy-code" id="btn-9">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-9" class="hljs language-javascript">/* .forEach() is a built-in array method that accepts 
a callback function as an argument */
arrUsers.forEach(displayUserAnon);</code></pre>

    <p>You could also have created the callback function in arrow function syntax. See below.</p>

<pre><button class="copy-code" id="btn-10">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-10" class="hljs language-javascript">/* Create arrow function expression to use as callback */    
const displayUserArrow = user =&gt; console.log(`Name: ${user.firstName}, Age: ${user.age}, City: ${user.city}`);</code></pre>

<p>Now that we have stored the arrow function in the variable <b>displayUserArrow</b>, we can pass that variable to <span class="syn-js">.forEach()</span> just like we did before:</p>

<pre><button class="copy-code" id="btn-11">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-11" class="hljs language-javascript">arrUsers.forEach(displayUserArrow);</code></pre>

<p>But why create the callback function separately when you can define it inline? See below.</p>

<pre><button class="copy-code" id="btn-12">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-12" class="hljs language-javascript">/* Define the callback function inline inside the .forEach() */
arrUsers.forEach(user =&gt; console.log(`Name: ${user.firstName}, Age: ${user.age}, City: ${user.city}`));</code></pre>

<p>This is the modern standard in JavaScript.</p>

</section>

<section id="async">
    <h2>Asynchronous callback functions</h2>
        
    <p>In all the examples above, the callback ran immediately (synchronous). However, in JavaScript, we often use callbacks to handle things that happen later, like a user click or a data download.</p>

    <p>In the next tutorial, <a href="event-object.html" target="_blank">Introduction to Events</a>, you will use callbacks that don't block your code but wait for a specific action to occur.</p>

    <p>You will also learn about asynchronous callbacks in the <a href="fetch-intro.html" target="_blank">Introduction to the Fetch API</a> Tutorial.</p>

</section>

    <section class="resources-learning" id="try-it">

        <h2>Try it yourself</h2>
        <p>In your workfile...</p>

        <p>---</p>

        <p>Create a main function called <code>processText</code> that accepts a string and a callback function. Then create two different callback functions that:</p>

<p>- Convert the text to uppercase<br>
- Add exclamation marks to the end of the text</p>

        <p>---</p>

<p>Given this array of numbers: <b>[1, 2, 3, 4, 5]</b>.</p>
<p>Create a main function called <code>transformArray</code> that loops through the array and doubles each number in the loop.</p>

<p>---</p>
<p>Use the <code>.forEach()</code> loop on the array of numbers: [10, 20, 30].
Write an inline arrow function inside the parentheses that outputs each number multiplied by 5. Try to write it on a single line.</p>

    
      </section>
    	
	<section class="resources-learning" id="resources">

		<h2>More learning resources</h2>
	
		<div class="flex-container">
		  <div class="text-container">
			<h3><span><i class="fa-solid fa-circle-question"></i> Tutorial Quiz</span></h3>
			<p><a href="https://brendan-munnelly.github.io/quiz-dorset-javascript/#/quiz-questions/15" target="_blank"><i class="fa-solid fa-circle-arrow-right"></i> &nbsp;&nbsp;Take the test</a></p>
	
		  </div>
	  
		  <div class="audio-container">
			<h3><span><i class="fa-solid fa-microphone"></i> Tutorial Podcast</span></h3>
	
			<audio controls>
			  <source src="assets/audio/functions-callback.mp3" type="audio/mp3">
			  Your browser does not support the audio element.
			</audio>
	
		  </div>
		</div>
	
	  </section>

	  <section class="resources-learning" id="ai-prompts">
          
        <h2>Sample AI prompts</h2>
    
        <div class="gpt"><button class="copy-gpt" id="btn-13">Copy <i class="fa-regular fa-lightbulb"></i></button><code id="strCode-13">What is the difference between a regular function and a callback function in JavaScript? Can you show me a basic example of a callback function and explain each part?</code></div>
        
        <div class="gpt"><button class="copy-gpt" id="btn-14">Copy <i class="fa-regular fa-lightbulb"></i></button><code id="strCode-14">Show me three different ways to write the same callback function using anonymous, arrow and inline function syntax. What are the advantages and disadvantages of each callback function syntax style?
Please provide examples of when to use each type of callback syntax.</code></div>
     


    
      </section>



</article>
</main>

<footer>
</footer>

<div id="cookie-banner">
	<p>This website uses cookies to ensure you get the best user experience. <a href="https://munnelly.com/privacy.html">Learn more</a>.</p>
	<div class="buttons">
		<button id="accept-cookies">Got it</button>
	</div>
</div>


<script>hljs.highlightAll();</script>

<script src="assets/js/utils.js"></script>


</body>
</html>