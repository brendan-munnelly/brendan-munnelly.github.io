<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Introduction to events | JavaScript Tutorials | Brendan Munnelly</title>
	<meta name="description" content="Creating function declarations, passing arguments to their parameters, and returning values back to the calling program.">

    <meta name="author" content="Brendan Munnelly">

    <link rel="apple-touch-icon" sizes="180x180" href="../../assets/img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../assets/img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../assets/img/favicon/favicon-16x16.png">
    <link rel="manifest" href="../../assets/img/favicon/site.webmanifest">

    <!-- Stylesheet-->
    <link rel="stylesheet" href="../../assets/css/dorset-js.css" />

	<style>
		pre { background-color: #282c34;}
        .table-js-methods td:nth-child(1) { min-width: 20%; }
	</style>
    <!-- Syntax Highlighter -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark-reasonable.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>

	<script defer src="../../assets/js/cookie.js"></script>

    <!-- Font Awesome 6 icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
	
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RQ1JXS4GKM"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-RQ1JXS4GKM');
    </script>
    </head>

    <body id="top">

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KGBDMFL"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->



		<header>
			<div class="wrapper">
				<div class="sidebar">
					<div><p>&nbsp;</p>
					</div>
				</div>
		
				<div class="content">
					<h1>Introduction to events</h1>
					<h2>Understanding JavaScript events, event listeners, event delegation, and event bubbling.</h2>
				</div>
			</div><!-- /wrapper -->
		</header>

		<main>

			<aside>
				<h3>JAVASCRIPT</h3>
	
				<p><i class="fas fa-home"></i> &nbsp;<a href="../index.html">Home</a></p>
	
				<h3>THIS TUTORIAL</h3>
                <p><a href="#learning-goals">Learning Goals</a></p>
                <p><a href="#event-object">About the event (e) object</a></p>
                <p><a href="#event-properties">Accessing event properties</a></p>
                <p><a href="#event-delegation">Event delegation</a></p>
                <p><a href="#event-bubbling">About event propagation: <i>capture</i> and <i>bubbling</i></a></p>
                <p class="toc-indent"><a href="#prevent">Preventing event bubbling</a></p>

                <p><a href="#try-it">Try it yourself</a></p>
                <p><a href="#resources">More learning resources</a></p>
                <p><a href="#ai-prompts">Sample AI prompts</a></p>
                <p><i class="fas fa-arrow-circle-up"></i> &nbsp;<a href="#top">Back to Top</a></p>
           
				<p>&nbsp;</p>
			  
			</aside>
	
	<article>
	<section id="learning-goals">
		<h2>Learning Goals</h2>
		<p>At the end of this Tutorial, you will be able to:</p>

		<ul>
            <li>Work with the built-in event object and its methods</li>
            <li>Use the <span class="syn-js">.addEventListener()</span> method to handle user interactions</li>
            <li>Access the <span class="syn-js">.target.id</span> and <span class="syn-js">.target.classname</span> properties of event objects</li>
            <li>Implement event delegation for efficient event handling</li>
            <li>Understand event bubbling and how to control it with the <span class="syn-js">.stopPropagation()</span> method.</li>
		</ul>

	</section>


<section>

 <div class="code-snippets" style="margin-bottom:32px">
            <p>For this Tutorial, in your <b>javascript/exercises</b> folder, create a new HTML file named <b>workfile-11.html</b>.</p>
   			<p>Create a new empty text file named <b>script-11.js</b> and save it in this same folder.</p>
            <p>Add a link to <b>script-11.js</b> in your <b>workfile-11.html</b> file using a <code>&lt;script&gt;</code> tag with the <code>defer</code> attribute.</p>


			<img src="assets/img/events/workfile-11.png" alt="screenshot">
		</div>


		
	</section>



    <section id="event-object">
        <h2>About the <code>event(e)</code> object</h2>
        <p>JavaScript includes several built-in objects. One of these is the <span class="syn-js">event</span> object, which represents something that happens in a web browser, such as:</p>
        
        <ul>
            <li>A user clicking a button</li>
            <li>A web page finished loading</li>
            <li>A form being submitted</li>
            <li>A key being pressed on the keyboard</li>
        </ul>

        <p>In a previous <a href="interactive-dom.html" target="_blank">Interacting with the DOM</a> Tutorial, you learned how to use event handlers like <span class="syn-js">onclick</span> to respond to user actions:</p>

        <img src="assets/img/events/event-handler.png" alt="screenshot" style="max-width: 580px">

        <p>The event object provides a more flexible way to handle events using the <span class="syn-js">.addEventListener()</span> method. This method takes two arguments:</p>
        
        <ul>
            <li>The type of event to listen for (such as <span class="syn-js">click</span>, <span class="syn-js">mouseover</span>, etc.)</li>
            <li>The function to call when the event occurs</li>
        </ul>

        <p>Here's how to rewrite the previous example using <span class="syn-js">.addEventListener()</span>:</p>

        <p>First, add this to the <span class="syn">&lt;body&gt;</span> of your <b>workfile-11.html</b> file.</p>

<pre><button class="copy-code" id="btn-1">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-1" class="hljs language-html">
&lt;button id="myButton" class="btn-blue"&gt;Click me&lt;/button&gt;
</code></pre>

        <p>Next, add the following JavaScript code to your <b>script-11.js</b> file.</p>
<pre><button class="copy-code" id="btn-2">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-2" class="hljs language-javascript">// Get the button element
const myButton = document.getElementById("myButton");

// Add event listener to button
myButton.addEventListener('click', () =&gt; {
    console.log("Button was clicked");
});</code></pre>

        <p>In modern JavaScript, event listeners are typically written using arrow function syntax.</p>

        <p>As an alternative to the above, you could omit the <b>myButton</b> intermediate variable and write the event listener as shown below.</p>
<pre><code class="hljs language-javascript">// Add event listener without intermediate variable
document.getElementById("myButton").addEventListener('click', () =&gt; {
    console.log("Button was clicked");
});</code></pre>


    </section>

    <section id="event-properties">
        <h2>Accessing event properties</h2>
        <p>When an event occurs, JavaScript stores details about the event in the object. To access these details, you need to add the <span class="syn-js">event</span> parameter to your event listener function.</p>

        <p>Update your event listener function to include the event parameter as shown below.</p>

<pre><button class="copy-code" id="btn-3">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-3" class="hljs language-javascript">// Add event listener to button
myButton.addEventListener('click', (event) =&gt; {
    // Access properties of the event object
    console.log(event.target.id);        // ID of clicked element
    console.log(event.target.className); // Classes of clicked element
});</code></pre>


        <p>In modern JavaScript, the event object is usually represented by the single letter <span class="syn-js">e</span>. And because <span class="syn-js">e</span> is the only parameter of the arrow function, you need not type the parenthesis <span class="syn-js">()</span>.</p>
        
        <p>Update your code as shown below.</p>

<pre><button class="copy-code" id="btn-4">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-4" class="hljs language-javascript">myButton.addEventListener('click', e =&gt; {
    // Access properties of the event object
    console.log(e.target.id);        // ID of clicked element
    console.log(e.target.className); // Classes of clicked element
});</code></pre>

        <p>The <span class="syn-js">e.target</span> property refers to the element that triggered the event.</p>


    </section>

    <section id="event-delegation">
        <h2>Event delegation</h2>
        <p>Event delegation is a technique in which you add a single event listener to a parent element instead of adding event listeners to individual elements. This is particularly useful when you have multiple similar elements that need the same event handling.</p>

        <p>Before continuing, add a <span class="syn">&lt;style&gt;</span> tag to the <span class="syn">&lt;head&gt;</span> of your <b>workfile-11.html</b> and paste in the following CSS rules.</p>


<pre><button class="copy-code" id="btn-5">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-5" class="hljs language-css">.btn-blue, .btn-green, .btn-red, .btn-purple {
   font-size: 16px; margin: 5px; border-radius: 5px; padding: 10px 20px;
   cursor: pointer; border: none; color: white
}

.btn-blue { background-color: #007BFF; }
.btn-green { background-color: #28a745; }
.btn-red { background-color: #dc3545; }
.btn-purple { background-color: #6f42c1; }</code></pre>    
    
    <p>Next, add the following <span class="syn">&lt;div&gt;</span> container with a <span class="syn">&lt;h2&gt;</span> subheading and three buttons to your <b>workfile-11.html</b> file.</p>
<pre><button class="copy-code" id="btn-6">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-6" class="hljs language-html">&lt;div id="buttonContainer"&gt;
    &lt;h2&gt;Button container&lt;/h2&gt;
    &lt;button id="btn-1" class="btn-green"&gt;Button 1&lt;/button&gt;
    &lt;button id="btn-2" class="btn-red"&gt;Button 2&lt;/button&gt;
    &lt;button id="btn-3" class="btn-blue"&gt;Button 3&lt;/button&gt;
&lt;/div&gt;</code></pre>

       <p>Finally, add this code to your script file.</p>

<pre><button class="copy-code" id="btn-7">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-7" class="hljs language-javascript">// **** EVENT DELEGATION ****

// Get the container element
const container = document.getElementById('buttonContainer');

// Add single event listener to container
container.addEventListener('click', e =&gt; {
   console.log(`You clicked ${e.target.id}`);
   console.log(`You clicked ${e.target.className}`);
   // Add new CSS class to targetted HTML element
   e.target.classList.add('btn-purple');
});</code></pre>

        <p>When you click any of the buttons inside the container, the event listener on the container element handles the click event. This is event delegation in action.</p>

        <p>The <span class="syn-js">.includes()</span> method determines whether a string contains a specified substring and returns true or false accordingly.</p>

        <p><i>Unfortunately, clicking on the container itself or other non-button elements such as the &lt;h2&gt; subheading inside it might also trigger the event listener!</i></p>

        <p>To prevent this, you can check the event target to ensure it is one of the buttons before applying any changes. Update your event listener code as follows:</p>


<pre><button class="copy-code" id="btn-8">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-8" class="hljs language-javascript">// Add single event listener to container
container.addEventListener('click', e =&gt; {
    // Check if clicked element is a button
    if (e.target.className.includes('btn')) {
        console.log(`You clicked ${e.target.id}`);
        console.log(`You clicked ${e.target.className}`);
        // Add new CSS class to targetted button
        e.target.classList.add('btn-purple');
    }
});</code></pre>

    <p>Verify that only clicking a button, not anything else, triggers the event listener.</p>

    <p>An as alternative to testing the CSS class name, you could also have checked the ID of the clicked element.</p>

<pre><code class="hljs language-javascript">if (e.target.id.includes('btn')) {
    ...
}</code></pre>

        <p>Your example is not yet complete: you need to deal with <i>event propagation</i>.</p>

    </section>

    <section id="event-bubbling">
        <h2>About event propagation: <i>capture</i> and <i>bubbling</i></h2>
        <p>When an event occurs on an element, it first runs handlers on that element, then on its parent, then all the way up to other ancestors. This process is called event bubbling.</p>


    <table class="table-js-methods">
    <tbody>
      <tr>
      <td><p>&nbsp;<b>Capture</b></p></td>
      <td><p>The event starts at the very top of the window and travels down the DOM tree branch, passing through every parent element until it reaches the target element.</p></td>
      </tr>
      <tr>
      <td><p>&nbsp;<b>Target</b></p></td>
      <td><p>The event has arrived at the button or other specific element you clicked.</p></td>
      </tr>
      <tr>
      <td><p>&nbsp;<b>Bubbling</b></p></td>
      <td><p>After reaching the target, the event bubbles up from the target element, triggering event listeners on the parent, then the grandparent, and so on, all the way back to the root.</p></td>
      </tr>
    </tbody>
    </table>        

    <p>In short, events don't just &#8216;happen&#8217; on the button. They start at the root, travel down (Capture), hit the target, and then travel back up (Bubble).</p>

    <img src="assets/img/events/event-prop.png" alt="screenshot">
        <p>Here's an example to demonstrate event bubbling. Add these three HTML elements to <b>workfile-11.html</b>:</p>

<pre><button class="copy-code" id="btn-9">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-9" class="hljs language-html">&lt;div id="outer"&gt;
    &lt;div id="inner"&gt;
        &lt;button id="myNewButton"&gt;Click me&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre>

        <p>Next, add this code to your <b>script-11.js</b> file.</p>
<pre><button class="copy-code" id="btn-10">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-10" class="hljs language-javascript">
document.getElementById('myNewButton').addEventListener('click', () =&gt; {
    console.log('Button clicked');
});

document.getElementById('inner').addEventListener('click', () =&gt; {
    console.log('Inner div clicked');
});

document.getElementById('outer').addEventListener('click', () =&gt; {
    console.log('Outer div clicked');
});</code></pre>

        <p>When you click the button, you'll see <i>all three messages</i> because the event bubbles up through the DOM tree.</p>

        <p>The <span class="syn-js">.addEventListener()</span> method only listens to the Bubbling phase (Phase 3). This is why event delegation works - you catch the event on its way back up.</p>

        <h3 id="prevent">Preventing event bubbling</h3>

        <p>Typically, you will <i>not</i> want the clicking on a button or other event to trigger events on any parent elements higher up the DOM tree. </p>
        <p>You can stop event bubbling using <span class="syn-js">.stopPropagation()</span> method. Update your code as shown below.</p>

<pre><button class="copy-code" id="btn-12">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-12" class="hljs language-javascript">// **** EVENT BUBBLING AND STOPPING PROPAGATION ****

document.getElementById('myNewButton').addEventListener('click', e =&gt; {
    console.log('Button clicked - no parent event triggered');
    e.stopPropagation(); // Stops the event from bubbling up
});</code></pre>

     <p>Using the <span class="syn-js">.addEventListener()</span> method has several advantages:</p>
        <ul>
            <li>Reduces the number of event listeners needed</li>
            <li>You can easily add and remove event listeners as required</li>
            <li>Works for dynamically added elements</li>
            <li>You keep your JavaScript code separate from your HTML.</li>
        </ul>
    </section>

    <section class="resources-learning" id="try-it">
        <h2>Try it yourself</h2>
        <p>---</p>

        <p>Create three nested &lt;div&gt; elements with different background colours.<br>
        Add click event listeners to each div.<br>
        Experiment with event bubbling and the .stopPropagation() method.</p>

        <p>---</p>

        <p>Create a button that changes its text when clicked.<br>
        Add both a click and mouseover event listener to the same button.<br>
        The mouseover should change the button's background colour.</p>
        <p>---</p>

        <p>Create a list of items (&lt;ul&gt; with several &lt;li&gt; elements).<br>
        Use event delegation to handle clicks on any list item.<br>
        When an item is clicked, change its text color.</p>

        <p>---</p>

    </section>


    <section class="resources-learning" id="ai-prompts">
        <h2>Sample AI prompts</h2>
        
        <div class="gpt"><button class="copy-gpt" id="btn-13">Copy <i class="fa-regular fa-lightbulb"></i></button><code id="strCode-13">Explain the difference between event bubbling and event capturing in JavaScript.</code></div>
        
        <div class="gpt"><button class="copy-gpt" id="btn-14">Copy <i class="fa-regular fa-lightbulb"></i></button><code id="strCode-14">Compare and contrast using inline event handlers (onclick="") versus the .addEventListener() method. What are the pros and cons of each approach?</code></div>
        
        <div class="gpt"><button class="copy-gpt" id="btn-15">Copy <i class="fa-regular fa-lightbulb"></i></button><code id="strCode-15">Show me how to implement event delegation for a dynamic list that allows items to be added or removed.</code></div>
    </section>
	


</article>
</main>

<footer>


</footer>

<div id="cookie-banner">
	<p>This website uses cookies to ensure you get the best user experience. <a href="https://munnelly.com/privacy.html">Learn more</a>.</p>
	<div class="buttons">
		<button id="accept-cookies">Got it</button>
	</div>
</div>


<script>hljs.highlightAll();</script>

<script src="assets/js/utils.js"></script>


</body>
</html>
