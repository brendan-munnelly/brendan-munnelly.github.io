<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Accessing remote APIs | JavaScript Tutorials | Brendan Munnelly</title>
	<meta name="description" content="Using the Fetch API to access remote public APIs, handle JSON responses, and display dynamic text and images on a web page.">

    <meta name="author" content="Brendan Munnelly">

    <link rel="apple-touch-icon" sizes="180x180" href="../../assets/img/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../assets/img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../assets/img/favicon/favicon-16x16.png">
    <link rel="manifest" href="../../assets/img/favicon/site.webmanifest">

    <link rel="stylesheet" href="../../assets/css/dorset-js.css" />

	<style>
		pre { background-color: #282c34;}
        .table-js-methods td:nth-child(1) { min-width: 20%; }
	</style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark-reasonable.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>

	<script defer src="../../assets/js/cookie.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
	
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RQ1JXS4GKM"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-RQ1JXS4GKM');
    </script>
    </head>

    <body id="top">

    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KGBDMFL"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <header>
			<div class="wrapper">
				<div class="sidebar">
					<div><p>&nbsp;</p>
					</div>
				</div>
		
				<div class="content">
					<h1>Accessing remote APIs</h1>
					<h2>Using the Fetch API to retrieve live data and images from external public servers.</h2>
				</div>
			</div></header>

		<main>

			<aside>
				<h3>JAVASCRIPT</h3>
	
				<p><i class="fas fa-home"></i> &nbsp;<a href="../index.html">Home</a></p>
	
				<h3>THIS TUTORIAL</h3>
                <p><a href="#learning-goals">Learning Goals</a></p>
                <p><a href="#introduction">Introduction to remote APIs</a></p>
                <p><a href="#rest-countries">Working with the REST Countries API</a></p>
                <p class="toc-indent"><a href="#parse-display-response">Parsing and displaying the response</a></p>
                <p class="toc-indent"><a href="#fetching-images">Understanding image URLs in JSON</a></p>
                <p><a href="#attach-button">Attaching the HTML output to a button</a></p>
                <p><a href="#json-placeholder-api">Working with the JSON Placeholder API</a></p>
                <p><a href="#adding-grid">Adding a grid layout</a></p>
                <p><a href="#try-it">Try it yourself</a></p>
                <p><a href="#ai-prompts">Sample AI prompts</a></p>
                <p><i class="fas fa-arrow-circle-up"></i> &nbsp;<a href="#top">Back to Top</a></p>
           
				<p>&nbsp;</p>
			  
			</aside>
	
	<article>
	<section id="learning-goals">
		<h2>Learning Goals</h2>
		<p>At the end of this Tutorial, you will be able to:</p>

		<ul>
            <li>Connect to public, third-party APIs using the <span class="syn-js">fetch()</span> method.</li>
            <li>Understand how APIs provide image data as URL strings.</li>
            <li>Extract nested data from complex JSON objects.</li>
            <li>Dynamically output mixed text and image data to the DOM.</li>
		</ul>

	</section>


 <section>
<div class="code-snippets" style="margin-bottom:32px">
            <p>For this Tutorial, in your <b>javascript/exercises</b> folder, create a new HTML file named <b>list-remote.html</b>.</p>
   			<p>Create a new empty text file named <b>list-remote.js</b> and save it in this same folder.</p>
            <p>Add a link to <b>list-remote.js</b> in your <b>list-remote.html</b> file using a <code>&lt;script&gt;</code> tag with the <code>defer</code> attribute.</p>
		</div>      </section>



    <section id="introduction">
        <h2>Introduction to remote APIs</h2>
        <p>In the <a href="fetch-json.html" target="_blank">previous tutorial</a>, you successfully used the Fetch API to load data from a local JSON file such as <b>data/products.json</b>. That is a great start, but the real power of JavaScript is its ability to communicate with live servers across the Internet.</p>
        
        <p>A web API (Application Programming Interface) is essentially a URL that, instead of returning an HTML web page meant for humans, returns raw data (usually in JSON format) to be parsed by JavaScript or other code.</p>

<pre><code class="hljs language-javascript"> const response = await fetch("REMOTE_URL_ENDPOINT_GOES_HERE"); </code></pre>

        <p>The error-handling techniques you learned in the previous tutorial will still work exactly the same way — you are simply changing the URL string from a local file path to a remote web address.</p>

        <p>In your own JSON files, you had control the structure. However, remote APIs may contain nested objects and arrays within objects that require more careful parsing.</p>


    </section>


    <section id="rest-countries">
        <h2>Working with the REST Countries API</h2>
        <p>Let's begin with a simple example that uses the REST Countries API with a remote URL of <b>https://restcountries.com/v3.1/region/europe</b>. Follow these steps:</p>

        <ol>
            <li>Copy the most basic form of a Fetch API function below to your <b>list-remote.js</b> script file.
<pre><button class="copy-code" id="btn-1">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-1" class="hljs language-javascript">
async function fetchCountriesData() {
    // Fetch the resource and get a Response (status, headers, body stream)
    const response = await fetch("https://restcountries.com/v3.1/region/europe");
    // Parse the response object to JSON
    const data = await response.json();
    // Verify the code is working by logging the data to the console
    console.log(data);
}

// Fetch the countries immediately when the page loads
fetchCountriesData();</code></pre>
            </li>
        <li>
        Run the <b>list-remote.html</b> web page from a local server. In your browser console, you can see that the response is complex in structure and detailed in content.

        <img src="assets/img/fetch-remote/console-countries.png" alt="screenshot"></li>
        </ol>


        <h3 id="parse-display-response">Parsing and displaying the response</h3>
        <p>Next, let's output some of the data to a web page. (You don't need to 'consume' all the data in a Fetch API response.)</p>

        <ol>
            <li>In your <b>list-remote.html</b> web page, add a <span class="syn">&lt;div&gt;</span> tag with an id of <b>remote-data-container</b>.</li>
            <li>In your <b>list-remote.js</b> script, add the following function.
<pre><button class="copy-code" id="btn-2">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-2" class="hljs language-javascript">function displayCountriesData(countriesArray) {
    const container = document.getElementById("remote-data-container");
    let htmlOutput = "";

    countriesArray.forEach(country =&gt; {
        htmlOutput += `
            &lt;p&gt;
            &lt;b&gt;${country.name.common}&lt;/b&gt;&lt;br&gt;
            Capital: ${country.capital[0]}&lt;br&gt;
            Population: ${country.population.toLocaleString()}&lt;br&gt;
            Region: ${country.region}
            &lt;/p&gt;
            &lt;p&gt;------------------&lt;/p&gt;
        `;
    });
    container.innerHTML = htmlOutput;
}</code></pre></li>
        <li>Call this display function from inside your <b>fetchCountriesData()</b> function.</li>
        <li>You browser should show something like the following:
        <img src="assets/img/fetch-remote/display-countries.png" alt="screenshot" style="max-width: 600px"></li>

        </ol>

            <p>Note that some of the response properties are simpler to parse than others.</p>

            <ul>
                <li>The <b>region</b> property key is just that - region. You can access it simply by typing the loop variable and the property name: <b>country.region</b>.
                    <img src="assets/img/fetch-remote/prop-region.png" alt="screenshot">
                
                The same is true for <b>population</b>. You can make this property more readable by adding a <b>.toLocaleString()</b> method.</li>

                <li>However, the <b>name</b> is a nested object instead of a simple string. So to access it you need to write <b>country.name.common</b> rather than just <b>country.name</b>.
                <img src="assets/img/fetch-remote/prop-name.png" alt="screenshot">
                
                </li>
                <li>The <b>capital</b> is not a string but an array. So you would write <b>country.capital[0]</b> to get the first (usually only) value.
                <img src="assets/img/fetch-remote/prop-capital.png" alt="screenshot"></li>
            </ul>


        <h3 id="fetching-images">Understanding image URLs in JSON</h3>
        <p>APIs often provide URLs for images. That is, the JSON data contains a <i>URL string</i> pointing to where the image lives on the internet.</p>
        <p>Note that an API does <i>not</i> send actual image files (like .jpg or .png files) in their JSON responses.</p>

        <p>In your <span class="syn-js">.forEach()</span> loop above, add this new line to display the flag of the various countries:</p>
<pre><button class="copy-code" id="btn-3">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-3" class="hljs language-javascript">
&lt;p&gt;&lt;img src="${country.flags.png}" alt="Flag of ${country.name.common}" width="50"&gt;&lt;/p&gt;    
</code></pre>        
        
        <p>This code injects the URL string of each image into the <span class="syn">src</span> attribute of a standard HTML <span class="syn">&lt;img&gt;</span> tag. Your browser output should look similar to that below.</p>

        <img src="assets/img/fetch-remote/display-countries-flags.png" alt="screenshot">

        <p>♿ Accessibility Tip: Note we're using dynamic <span class="syn">alt</span> text. This makes the page usable for screen reader users.</p>
    </section>

    <section id="attach-button">
        <h2>Attaching the HTML output to a button</h2>
        <p>In the above sample, the remote data is displayed on the loading of the <b>list-remote.html</b> web page. Let's instead attach the <b>displayCountriesData(countriesArray)</b> function to a button.</p>

        <p>Start by adding some CSS styles to the <span class="syn">&lt;head&gt;</span> of your web page.</p>
<pre><button class="copy-code" id="btn-4">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-4" class="hljs language-html">&lt;style&gt;
        body { font-family: Arial, sans-serif; margin: 0 auto; }
        h1 { color: #333; text-align:center }
        p { margin: 10px 0; font-size: 18px }
        #remote-data-container { max-width: 80%; margin: 20px auto; padding: 20px; background-color: #f9f9f9; border: 1px solid #ddd; border-radius: 5px }
        #button-container { text-align: center; margin-bottom: 20px }
        .btn {
            display: inline-block; padding: 10px 20px; font-weight: bold;
            color: #fff; background-color: #007BFF;
            border: none; border-radius: 5px; cursor: pointer;
            font-size: 18px; transition: background-color 0.3s ease;
        }
        .btn:hover { background-color: #0056b3; }
        img { display: block; margin: 10px 0; }
&lt;/style&gt;</code></pre>

        <p>Next, add an <span class="syn">&lt;h1&gt;</span> element and a button container <span class="syn">&lt;div&gt;</span> to your web page (so we can use <a href="events.html#event-delegation" target="_blank">event delegation</a>). Insert a single button to call the display countries function.</p>

<pre><button class="copy-code" id="btn-5">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-5" class="hljs language-html">&lt;h1&gt;Display remote data&lt;/h1&gt;
    &lt;div id="button-container"&gt;
        &lt;button class="btn" id="btn-countries"&gt;Load Countries&lt;/button&gt;
    &lt;/div&gt;</code></pre>


    <p>Replace everything in your <b>list-remote.js</b> script with the following</p>

<pre><button class="copy-code" id="btn-6">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-6" class="hljs language-javascript">
// Fetch function
async function fetchCountriesData() {
    try {
        const response = await fetch("https://restcountries.com/v3.1/region/europe");
        if (!response.ok) {
            console.log(`Network response was not ok - Status: ${response.status}`);
            return;
        }
        const data = await response.json();
        console.log(data);
        // Verify the code is working by logging the data to the console
        console.log(data);
        // Call the display function
        displayCountriesData(data);
    } catch (error) {
        const container = document.getElementById("remote-data-container");
        container.innerHTML = '&lt;p class="error"&gt;⚠️ Failed to load data. Please try again later.&lt;/p&gt;';   
        console.error(`Error fetching data: ${error}`);
    }
}

// Display function
function displayCountriesData(countriesArray) {
    const container = document.getElementById("remote-data-container");
    let htmlOutput = "";

    countriesArray.forEach(country =&gt; {
        htmlOutput += `
        &lt;p&gt;&lt;img src="${country.flags.png}" alt="Flag of ${country.name.common}" width="50"&gt;&lt;/p&gt;
            &lt;p&gt;
            &lt;b&gt;${country.name.common}&lt;/b&gt;&lt;br&gt;
            Capital: ${country.capital[0]}&lt;br&gt;
            Population: ${country.population.toLocaleString()}&lt;br&gt;    
            Region: ${country.region}
            &lt;/p&gt;
            &lt;p&gt;------------------&lt;/p&gt;
        `;
    });

    container.innerHTML = htmlOutput;
}

// Event listener on the parent container
document.getElementById("button-container").addEventListener("click", function(e) {
    if (e.target.id === "btn-countries") {
        fetchCountriesData();
    }
});</code></pre>


    </section>

    <section id="json-placeholder-api">
        <h2>Working with the JSON Placeholder API</h2>
        
        <p>Now add a second Fetch API snippet to our web page and script files. The endpoint <b>https://jsonplaceholder.typicode.com/users</b> returns 10 random and fausers. </p>
            
            <p>Follow these steps:</p>
        
        <ol>
            <li>Update your <b>list-remote.html</b> web page with a second button.
<pre><button class="copy-code" id="btn-7">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-7" class="hljs language-html">&lt;button class="btn" id="btn-users"&gt;Load Users&lt;/button&gt;</code></pre></li>
            <li>In your <b>list-remote.js</b> file, update your event delegation function.
            
<pre><button class="copy-code" id="btn-8">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-8" class="hljs language-javascript">// Event listener on the parent container
document.getElementById("button-container").addEventListener("click", function(e) {
    if (e.target.id === "btn-countries") {
        fetchCountriesData();
    } else if (e.target.id === "btn-users") {
        fetchUsersData();   
    }
}); </code></pre></li>
            <li>In the same script file, copy and paste the <b>fetchCountriesData()</b> function, and update it as shown below.
                <img src="assets/img/fetch-remote/users-fetch.png" alt="screenshot" class="wider-115"></li>
            <li>Add the code below to display the fetched user data.
<pre><button class="copy-code" id="btn-9">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-9" class="hljs language-javascript">function displayUsersData(usersArray) {
    const container = document.getElementById("remote-data-container");
    let htmlOutput = "";
    usersArray.forEach(user =&gt; {
        htmlOutput += `
            &lt;p&gt;
            &lt;b&gt;${user.name} ${user.username}&lt;/b&gt;&lt;br&gt;
            Email: &lt;a href="mailto:${user.email}"&gt;${user.email}&lt;/a&gt;&lt;br&gt;
            Website: &lt;a href="http://${user.website}" target="_blank"&gt;${user.website}&lt;/a&gt;&lt;br&gt;
            Location: ${user.address.street}, ${user.address.city}
            &lt;/p&gt;
        `;
    });
    container.innerHTML = htmlOutput;
} </code></pre>

            </li>
        </ol>

    <p>You should now see a list of random users when you click the <b>Load Users</b> button.</p>
   
    </section>

    <section id="adding-grid">
        <h2>Adding a grid layout</h2>
        <p>To make the returned country and user data look more organised, you can use a CSS grid layout. This allows you to display each data item in a responsive grid that adjusts based on the screen size.</p>

        <p>Begin in your <b>list-remote.html</b> web page by updating the container for displaying the remote data.</p>

<pre><button class="copy-code" id="btn-10">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-10" class="hljs language-html">
&lt;div id="remote-data-container" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;"&gt;&lt;/div&gt;</code></pre>

        <p>Next, in your <b>list-remote.js</b> file, update the HTML output for the country display function to wrap each country and user card in a styled <span class="syn">&lt;div&gt;</span> element.</p>

<pre><button class="copy-code" id="btn-11">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-11" class="hljs language-javascript">htmlOutput += `
    &lt;div style="border: 1px solid #ccc; padding: 12px; border-radius: 6px;"&gt;&lt;img src="${country.flags.png}" alt="Flag of ${country.name.common}" width="100"&gt;
         &lt;p&gt;
            &lt;b&gt;${country.name.common}&lt;/b&gt;&lt;br&gt;
            Capital: ${country.capital[0]}&lt;br&gt;
            Population: ${country.population.toLocaleString()}&lt;br&gt;            
            Region: ${country.region}
         &lt;/p&gt;
    &lt;/div&gt;
`;</code></pre>

        <p>Update the user display function in a similar way.</p>

<pre><button class="copy-code" id="btn-12">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-12" class="hljs language-javascript">htmlOutput += `
    &lt;div style="border: 1px solid #ccc; padding: 12px; border-radius: 6px;"&gt;
       &lt;p&gt;
       &lt;b&gt;${user.name} ${user.username}&lt;/b&gt;&lt;br&gt;
        Email: &lt;a href="mailto:${user.email}"&gt;${user.email}&lt;/a&gt;&lt;br&gt;
        Website: &lt;a href="http://${user.website}" target="_blank"&gt;${user.website}&lt;/a&gt;&lt;br&gt;
        Location: ${user.address.street}, ${user.address.city}
       &lt;/p&gt;
    &lt;/div&gt;
`;</code></pre>

    <p>Finally, add this new CSS style to the <span class="syn">&lt;head&gt;</span> of your HTML file:</p>

<pre><button class="copy-code" id="btn-13">Copy <i class="fa-regular fa-copy"></i></button><code id="strCode-13" class="hljs language-css">#remote-data-container p { line-height: 1.5 }</code></pre>


    <p>In your web browser, confirm that the country and user data are displayed in a grid layout.</p>
    </section>


    <section class="resources-learning" id="try-it">
        <h2>Try it yourself</h2>
       
        <p><b>Task: Accessing the Rick & Morty character API</b></p>
        <p>Use the public Rick & Morty API to add an option to display character data from this show on your <b>list-remote.html</b> web page.</p>
        <ol>
            <li>In the <code>&lt;div id="button-container"&gt;</code> element of <b>list-remote.html</b>, add a third button with a unique <code>id</code> to call the display function for Rick & Morty data. Add the text <b>Load Rick & Morty</b> to the button.</li>
            <li>In <b>list-remote.js</b>, make a copy of the <code>fetchUsersData()</code> display function, rename it, and update its endpoint to:<br><code>https://rickandmortyapi.com/api/character</code></li>
            <li>Log the data to the console first. Notice that the array of characters is located inside <code>data.results</code>. Call your Rick & Morty display function (see below) from your fetch function.</li>
            <li>Make a copy of the <code>displayUsersData()</code> display function, rename it, and pass the argument <code>rmArray</code> to it. Rename the <code>.forEach()</code> loop variable to <code>character</code>.</li>
            <li>Inside the loop, access the character's <b>image</b> (<code>character.image</code>), <b>name</b> (<code>character.name</code>), and their <b>status</b> (<code>character.status</code>).</li>
        </ol>

        <p>In your browser, click the <b>Load Rick & Morty</b> button and verify the data displays correctly.</p>

    </section>


<section class="resources-learning" id="resources">

              <h2>More learning resources</h2>
          
              <div class="flex-container">
                <div class="text-container">
                  <h3><span><i class="fa-solid fa-circle-question"></i> Tutorial Quiz</span></h3>
                  <p><a href="https://brendan-munnelly.github.io/quiz-dorset-javascript/#/quiz-questions/18" target="_blank"><i class="fa-solid fa-circle-arrow-right"></i> &nbsp;&nbsp;Take the test</a></p>
          
                </div>
            
                <div class="audio-container">
                  <h3><span><i class="fa-solid fa-microphone"></i> Tutorial Podcast</span></h3>
          
                  <audio controls>
                    <source src="assets/audio/fetch-api-remote.mp3" type="audio/mp3">
                    Your browser does not support the audio element.
                  </audio>
          
                </div>
              </div>
          
            </section>






    <section class="resources-learning" id="ai-prompts">
        <h2>Sample AI prompts</h2>
        
        <div class="gpt"><button class="copy-gpt" id="btn-13">Copy <i class="fa-regular fa-lightbulb"></i></button><code id="strCode-13">Explain how to read complex JSON structures from an API. How do I know if the data I want is an Object or an Array, and how do I navigate "nested" data paths using dot notation?</code></div>
        

    </section>

</article>
</main>

<footer>

</footer>

<div id="cookie-banner">
	<p>This website uses cookies to ensure you get the best user experience. <a href="https://munnelly.com/privacy.html">Learn more</a>.</p>
	<div class="buttons">
		<button id="accept-cookies">Got it</button>
	</div>
</div>

<script>hljs.highlightAll();</script>
<script src="assets/js/utils.js"></script>
</body>
</html>

<!-- 
Here are some great options that require no API key, all with similar structures to Rick & Morty that your students will already be familiar with:
PokéAPI (https://pokeapi.co/api/v2/pokemon?limit=20) is probably the strongest choice. It's extremely well-documented, very actively maintained, and almost universally recognised by students. Interestingly, it shares the same results wrapper pattern as Rick & Morty, so it connects nicely to what students are already learning about accessing nested data. You can also fetch individual Pokémon by name or ID, e.g. https://pokeapi.co/api/v2/pokemon/pikachu, which opens up nice exercises around dynamic fetch calls.
The Disney API (https://api.disneyapi.dev/character) covers a huge range of characters across all Disney franchises and returns clean, well-structured JSON with no authentication required. It would appeal to a wide range of students.
The Simpsons API (https://thesimpsonsapi.com) is a newer option that returns character data including name, age, occupation, phrases, and portrait images — no key needed. There's also the older Simpsons Quote API at https://thesimpsonsquoteapi.glitch.me/quotes which is simpler and returns quotes with character images, good for a quick introductory example.
A practical note worth bearing in mind: community-built APIs like the Simpsons ones can occasionally have reliability issues or go offline, whereas PokéAPI and the Disney API are well-established and consistently available. For tutorial content where you want stability, PokéAPI would be my top recommendation — it's been around for years and is widely used in exactly this kind of educational context.
-->